- name = "Vicven Milner"
- levels = { sorcerer: 3 }
- hd = { sorcerer: 'd6' }
- ability_scores = {str: 8, dex: 14, con: 16, int: 10, wis: 12, cha: 16}
- mods = Hash[ability_scores.map { |k, v| [k, (v - 10) / 2] }]
- prof = ((levels.values.sum - 1) / 4 + 2)
- hp = 6 + (levels[:sorcerer] - 1) * 4 + mods[:con] * levels[:sorcerer]
!!!
%head
  %title #{name}
  %link{rel: 'stylesheet', type: 'text/css', href: '../charsheet.css'}
%body
  %h1 #{name}
  .info-bar
    %span.subrace Human
    %span.class-level=levels.map { |k, v| "#{k.capitalize} #{v}"}.join('/')
    %span.xp (1228 / 2700 xp)
  .flex.atf
    -#ability scores
    .ability-scores.flex.tall
      - ability_scores.each do |k, v|
        %div{class: k}
          .score=v
          .mod='%+d' % mods[k]
    -#proficiencies
    .proficiencies
      .head.b
        .bonus='%+d' % prof
      .save Con, Cha
      .skill Deception, History, Insight, Intimidation, Persuasion
      .tool Gaming Set (cards)
      .language Common, Dwarvish, Elvish
      .weapon dagger, dart, sling, quarterstaff, light crossbow
      .armor none
    -#health
    .health
      .head
        Max HP:
        %span.b=hp
      .hit-dice.resource
        .head Hit Dice
        - levels.each do |k, v|
          %div{class: "uses #{hd[k]}"}
            - levels[k].times do |i|
              .checkbox
      .death-saves.resource
        .head Death Saves
        .success.uses
          - 3.times do |i|
            .checkbox
        .failure.uses
          - 3.times do |i|
            .checkbox
    -#hp
    .hp
      .scratch
        .title Current HP
        %div
      .scratch
        .title Temp HP
        %div

  .flex.btf

    .flex.column.wide
      -#equip
      .equipment-set.half.block
        .head.b Standard Equipment
        .small Dagger
        .ac
          .head.b AC
          .value 12
        .move
          .head.b Move
          .value 30
        .head.b Use an Item Action
        .attack.roll
          .b.bg Roll
          .value none
        .attack.damage
          .b.bg Damage
          .value
            1d4 + #{mods[:dex]}
            %span.small piercing
        .attack.range
          .b.bg Range
          .value 5
      -#equip
      .equipment-set.half.block
        .head.b Alternate Equipment
        .small Light Crossbow
        .ac
          .head.b AC
          .value 12
        .move
          .head.b Move
          .value 30
        .head.b Attack Action
        .attack.roll
          .b.bg Roll
          .value d20 + #{mods[:dex] + prof}
        .attack.damage
          .b.bg Damage
          .value
            1d8 + #{mods[:dex]}
            %span.small piercing
        .attack.range
          .b.bg Range
          .value 80 / 320

      -#inspiring-leader
      .feature.block
        .head.b Inspiring Leader
        %p.small
          You can spend 10 minutes to inspire your companions. Choose up to 6 friendly creatures (which can include yourself) within 30 feet who can see or hear you and who can understand you. Each creature gains #{levels[:sorcerer] + mods[:cha]} temporary hit points. A creature can't gain temporary hit points from this feat again until it has finished a short rest.

      -#favored-by-the-gods
      .feature.block
        .head
          %span.b Favored by the Gods
          .uses.short-rest
            - 1.times do |i|
              .checkbox
        %p.small
          If you fail a saving throw or miss an attack roll, you can roll 2d4 and add it to the total, possibly changing the result.

      -#metamagic
      .feature.block
        .head.b Metamagic
        .block.small
          You can alter a spell you cast in one of the following ways.
        .block.small
          %span.title Heightened Spell
          &#x2726; 3 sorcery points
          %p
            When you cast a spell that forces a creature to make a saving throw, you can spend 3 sorcery points to give one target disadvantage on its first saving throw against the spell.
        .block.small
          %span.title Twinned Spell
          &#x2726; sorcery point cost = spell level
          %p
            When you cast a spell that targets only one creature and doesn't have a range of self, you can spend a number of sorcery points equal to the spell's level to target a second creature in range with the same spell (1 sorcery point for cantrips).

    .flex.tall.column.narrow
      -#paladin-spellcasting
      .spellcasting.block{style: "margin-top: -3rem;"}
        .head.b Sorcerer Spellcasting
        .stat.b
          Spellcasting Ability:
          .value Cha
        .stat.b
          Spell Attack Modifier:
          .value='%+d' % (mods[:cha] + prof)
        .stat.b
          Saving Throw DC:
          .value=8 + prof + mods[:cha]
      .flex.block
        .head.b Spell Slots
        .slots.resource.half
          .label
            1
            %sup> st
          .uses
            - 4.times do |i|
              .checkbox
        .slots.resource.half
          .label
            2
            %sup> nd
          .uses
            - 2.times do |i|
              .checkbox

      .scratch.concentration.block
        .title.b Concentration
        %div
      -#font-of-magic
      .feature.block
        .head.b Font of Magic
        .points
          .scratch
            .title
              Max. Sorcery Points:
              %span.b=[levels[:sorcerer], 15].min
            %div
          %p.small
            You have a pool of sorcery points, which allow you to create a variety of magical effects. You regain all sorcery points after a long rest. You can never have more sorcery points than the maximum shown.
      -#flexible casting
      .feature.block
        .head.b Flexible Casting
        %p.small
          %span.b Bonus Action.
          You can expend a spell slot to gain a number of sorcery points
          %span.b equal to the slot's level.
        %p.small
          Or, you can transform unexpended sorcery points into a spell slot, according to the table below.
        .table.small{style: "width: 80%; margin: 0.5rem auto 0 auto;"}
          .row
            .c.b Spell Slot Level
            .c.b Sorcery Point Cost
          .row
            .c 1<sup>st</sup>
            .c 2
          .row
            .c 2<sup>nd</sup>
            .c 3
          .row
            .c 3<sup>rd</sup>
            .c 5
          .row
            .c 4<sup>th</sup>
            .c 6
          .row
            .c 5<sup>th</sup>
            .c 7

  .new-page

  .inventory.grid.block
    .head.b Inventory
    .item Dagger (2)
    .item Backpack
    .item Tinderbox
    .item
    .item Light Crossbow
    .item Bedroll
    .item Waterskin
    .item
    .item Component pouch
    .item Rations (10)
    .item Crossbow bolt (38)
    .item
    .item
    .item
    .item Fine clothes
    .item 50 ft. hemp rope
    .item
    .item
    .item
    .item
    .item.spell Wand of magic missiles
    .item Torches (10)
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .money
      .label.b.bg pp
      .label.b.bg gp
      .label.b.bg sp
      .label.b.bg cp
      .value.pp
      .value.gp 81
      .value.sp 4
      .value.cp 12

  .spell-list.flex.block
    .spell-actions.column
      .head.b Spell Actions
      .spell
        .title Fire Bolt
        .level cantrip
        .keywords.b 
      .spell
        .title Shocking Grasp
        .level cantrip
        .keywords.b
      .spell
        .title Spare the Dying
        .level cantrip
        .keywords.b 
      .spell
        .title Thaumaturgy
        .level cantrip
        .keywords.b 
      .spell
        .title Bane
        .level 1<sup>st</sup>
        .keywords.b conc.
      .spell
        .title Charm Person
        .level 1<sup>st</sup>
        .keywords.b
      .spell
        .title Aid
        .level 2<sup>nd</sup>
        .keywords.b
      .spell
        .title Hold Person
        .level 2<sup>nd</sup>
        .keywords.b conc.

    .other-spells.column
      .head.b Bonus Actions
      .spell
        .title Healing Word
        .level 1<sup>st</sup>
        .keywords.b
