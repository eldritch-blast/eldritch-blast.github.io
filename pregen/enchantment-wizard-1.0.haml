- name = "Astrith"
- levels = { wizard: 1 }
- hd = { wizard: 'd6' }
- ability_scores = {str: 8, dex: 12, con: 14, int: 16, wis: 9, cha: 14}
- mods = Hash[ability_scores.map { |k, v| [k, (v - 10) / 2] }]
- prof = ((levels.values.inject(&:sum) - 1) / 4 + 2)
- hp = 6 + (levels[:wizard] - 1) * 4 + mods[:con] * levels.values.inject(&:sum)
!!!
%head
  %title #{name}
  %link{rel: 'stylesheet', type: 'text/css', href: '../charsheet.css'}
%body
  %h1 #{name}
  .info-bar
    %span.subrace Tiefling
    %span.class-level=levels.map { |k, v| "#{k.capitalize} #{v}"}.join('/')
    %span.xp (0 / 300 xp)
  .flex.atf
    -#ability scores
    .ability-scores.flex.tall
      - ability_scores.each do |k, v|
        %div{class: k}
          .score=v
          .mod='%+d' % mods[k]
    -#proficiencies
    .proficiencies
      .head.b
        .bonus='%+d' % prof
      .save Int, Wis
      .skill Arcana, Investigation, Medicine, Religion
      .tool Herbalism kit
      .language Common, Infernal, Sylvan
      .weapon dagger, dart, sling, quarterstaff, light crossbow
      .armor none
    -#health
    .health
      .head
        Max HP:
        %span.b=hp
      .hit-dice.resource
        .head Hit Dice
        - levels.each do |k, v|
          %div{class: "uses #{hd[k]}"}
            - levels[k].times do |i|
              .checkbox
      .death-saves.resource
        .head Death Saves
        .success.uses
          - 3.times do |i|
            .checkbox
        .failure.uses
          - 3.times do |i|
            .checkbox
    -#hp
    .hp
      .scratch
        .title Current HP
        %div
      .scratch
        .title Temp HP
        %div

  .flex.btf

    .flex.column.wide
      .half
        -#equip
        .equipment-set.block
          .head.b Spellcasting Equipment
          .small Orb
          .ac
            .head.b AC
            .value=10 + mods[:dex]
          .move
            .head.b Move
            .value 30
          .head.b Fire Bolt
          .attack.roll
            .b.bg Roll
            .value d20 + #{mods[:int] + prof}
          .attack.damage
            .b.bg Damage
            .value
              1d10
              %span.small fire
          .attack.range
            .b.bg Range
            .value 120

        -#hellish-resistance
        .feature.block
          .head.b Hellish Resistance
          %p.small
            You have resistance to fire damage.

      .half
        -#equip
        .equipment-set.block
          .head.b Alternate Equipment
          .small Dagger, orb
          .ac
            .head.b AC
            .value=10 + mods[:dex]
          .move
            .head.b Move
            .value 30
          .head.b Attack Action
          .attack.roll
            .b.bg Roll
            .value d20 + #{mods[:dex] + prof}
          .attack.damage
            .b.bg Damage
            .value
              1d4 + #{mods[:dex]}
              %span.small piercing
          .attack.range
            .b.bg Range
            .value 5
        -#darkvision
        .feature.block
          .head.b Darkvision
          %p.small
            You can see in dim light as though it were normal light, and darkness as though it were dim light, up to 60 ft. away.


    .flex.tall.column.narrow
      -#wizard-spellcasting
      .spellcasting.block
        .head.b Wizard Spellcasting
        .stat.b
          Spellcasting Ability:
          .value Int
        .stat.b
          Spell Attack Modifier:
          .value='%+d' % (mods[:int] + prof)
        .stat.b
          Saving Throw DC:
          .value=8 + prof + mods[:int]
      .flex.block
        .head.b Spell Slots
        .slots.resource.half
          .label
            1
            %sup> st
          .uses
            - 2.times do |i|
              .checkbox
        .slots.resource.half
      .scratch.block
        .title.b Concentration
        %div
      .feature.block
        .head
          %span.b Arcane Recovery
          .uses
            .checkbox
        %p.small
          Once per day, when you finish a short rest, you can recover expended spell slots of 5<sup>th</sup> level or lower. These slots must have a combined level &#x2264; #{levels[:wizard] / 2 + (levels[:wizard] % 2)}.
      .feature.block
        .head.b Preparation
        %p.small
          After a long rest, you can prepare any #{levels[:wizard] + mods[:int]} spells from your spellbook.
      .feature.block
        .head.b Ritual Casting
        %p.small
          You can cast a wizard spell with the ritual tag as a ritual if it's in your spellbook.
      .feature.block
        .head.b Spellbook
        %p.small
          You have a spellbook. You may add two wizard spells to it for free whenever you gain a wizard level. If you find a wizard spell in your travels, you can add it to your spellbook by spending 2 hours and 50 gp worth of materials per spell level to copy it. You can only add spells of a level you can cast.

  .new-page

  .inventory.grid.block
    .head.b Inventory
    .item Spellbook
    .item Backpack
    .item Ink (1 oz. vial)
    .item Herbalism kit
    .item Dagger
    .item Winter blanket
    .item Ink pen
    .item Parchment (10 sheets)
    .item Component pouch
    .item Orb
    .item Rations (10)
    .item Waterskin
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .money
      .label.b.bg pp
      .label.b.bg gp
      .label.b.bg sp
      .label.b.bg cp
      .value.pp
      .value.gp 5
      .value.sp
      .value.cp

%h2 Spellbook
.spell-list.flex
  .spell-actions.column
    .head.b Spell Actions
    .spell
      .prepared
        .checkbox.checked
      .title Dancing Lights
      .level cantrip
      .keywords.b conc.
    .spell
      .prepared
        .checkbox.checked
      .title Fire Bolt
      .level cantrip
      .keywords.b
    .spell
      .prepared
        .checkbox.checked
      .title Friends
      .level cantrip
      .keywords.b conc.
    .spell
      .prepared
        .checkbox.checked
      .title Thaumaturgy
      .level cantrip
      .keywords.b
    .spell
      .prepared
        .checkbox
      .title Detect Magic
      .level 1<sup>st</sup>
      .keywords.b conc., ritual
    .spell
      .prepared
        .checkbox
      .title Mage Armor
      .level 1<sup>st</sup>
      .keywords.b
    .spell
      .prepared
        .checkbox
      .title Sleep
      .level 1<sup>st</sup>
      .keywords.b
    .spell
      .prepared
        .checkbox
      .title Tasha's Hideous Laughter
      .level 1<sup>st</sup>
      .keywords.b conc.

  .other-spells.column
    .head.b Non-Combat Spells
    .spell
      .prepared
        .checkbox
      .title Find Familiar
      .level 1<sup>st</sup>
      .keywords.b ritual
    .spell
      .prepared
        .checkbox
      .title Identify
      .level 1<sup>st</sup>
      .keywords.b ritual

  .flex.block
    .companion.half.flex.tall
      .head.b Owl Familiar
      .combat-stats
        .ac 11
        .hp 1
        .move 5 ft., fly 60 ft.
      .ability-scores.flex
        .str -4
        .dex +1
        .con -1
        .int -4
        .wis -1
        .cha -2
      .other-stats
        .skills Perception +3, Stealth +3
        .senses darkvision 120 ft.
      .features
        .flyby
          %span.b Flyby.
          The owl doesn't provoke opportunity attacks when it flies out of an enemy's reach.
        .keen-hearing-and-sight
          %span.b Keen Hearing and Sight.
          The owl has advantage on Wisdom (Perception) checks that rely on hearing or sight.
