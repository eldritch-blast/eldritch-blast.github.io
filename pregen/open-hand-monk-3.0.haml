- name = "左路/ Left Path"
- levels = { monk: 3 }
- hd = { monk: 'd8' }
- ability_scores = {str: 10, dex: 16, con: 14, int: 8, wis: 16, cha: 8}
- mods = Hash[ability_scores.map { |k, v| [k, (v - 10) / 2] }]
- prof = ((levels.values.sum - 1) / 4 + 2)
- hp = 8 + (levels[:monk] - 1) * 5 + mods[:con] * levels.values.sum
- monk_damage_die = 4 + 2 * ((levels[:monk] + 1) / 6)
- monk_speed_bonus = 5 + 5 * ((levels[:monk] + 2) / 4)
!!!
%head
  %title #{name}
  %link{rel: 'stylesheet', type: 'text/css', href: '../charsheet.css'}
%body
  %h1 #{name}
  .info-bar
    %span.subrace Human
    %span.class-level=levels.map { |k, v| "#{k.capitalize} #{v}"}.join('/')
    %span.xp (900 / 2,700 xp)
  .flex.atf
    -#ability scores
    .ability-scores.flex.tall
      - ability_scores.each do |k, v|
        %div{class: k}
          .score=v
          .mod='%+d' % mods[k]
    -#proficiencies
    .proficiencies
      .head.b
        .bonus='%+d' % prof
      .save Str, Dex
      .skill Athletics, Insight, Medicine, Perception, Stealth
      .tool Musical instrument (&#xe8;rh&#xfa;), calligrapher's supplies
      .language Common, Celestial, Deep Speech
      .weapon simple, shortsword
      .armor none
    -#health
    .health
      .head
        Max HP:
        %span.b=hp
      .hit-dice.resource
        .head Hit Dice
        - levels.each do |k, v|
          %div{class: "uses #{hd[k]}"}
            - levels[k].times do |i|
              .checkbox
      .death-saves.resource
        .head Death Saves
        .success.uses
          - 3.times do |i|
            .checkbox
        .failure.uses
          - 3.times do |i|
            .checkbox
    -#hp
    .hp
      .scratch
        .title Current HP
        %div
      .scratch
        .title Temp HP
        %div

  .flex.btf

    .flex.column.wide
      -#equip
      .equipment-set.block.half
        .head.b Standard Equipment
        .small Staff, unarmored
        .ac
          .head.b AC
          .value=10 + mods[:dex] + mods[:wis]
        .move
          .head.b Move
          .value=30 + monk_speed_bonus
        .head.b Attack Action
        .attack.roll
          .b.bg Roll
          .value d20 + #{mods[:dex] + prof}
        .attack.damage
          .b.bg Damage
          .value
            1d#{[8, monk_damage_die].max} + #{mods[:dex]}
            %span.small bludgeoning
        .attack.range
          .b.bg Range
          .value 5
        .head.b Bonus Action
        .attack.roll
          .b.bg Roll
          .value d20 + #{mods[:dex] + prof}
        .attack.damage
          .b.bg Damage
          .value
            1d#{monk_damage_die} + #{mods[:dex]}
            %span.small bludgeoning
        .attack.range
          .b.bg Range
          .value 5
        %ul.small
          %li Must Attack with monk weapon or unarmed strike to use bonus action

      .half{style: 'margin-top: -2.2rem;'}
        -#unarmored-defense
        .feature.block
          .head.b Unarmored Defense
          %p.small
            While not wearing armor or using a shield, your AC is 10 + Dex + Wis.
        -#unarmored-movemet
        .feature.block
          .head.b Unarmored Movement
          %p.small
            While not wearing armor or using a shield, your speed increases by 10 feet.

        -#martial-arts
        .feature.block
          .head.b Martial Arts
          %p.small While not wearing armor or using a shield, if you are unarmed or wielding only monk weapons, you gain the following benefits. Monk weapons are simple weapons without the heavy or two-handed property, and shortswords.
          %ul.small
            %li You can use Dex instead of Str for melee attack and damage rolls.
            %li You can roll 1d#{monk_damage_die} in place of your normal weapon damage.
            %li You can make one unarmed strike as a bonus action when you take the Attack action.

      -#deflect-missiles
      .feature.block
        .head.b Deflect Missiles
        %p.small
          %span.b Reaction.
          Deflect or catch the missile when you are hit by a ranged weapon attack. The damage you  take is reduced by 1d10 + #{mods[:dex] + levels[:monk]}.
        %p.small
          If you reduce the damage to 0 and have a free hand, you can catch a missile that is small enough to hold in one hand. If you catch it, you can spend
          %span.b 1 ki point
          to make a ranged attack with it as part of the same reaction. You make this attack with proficiency, and the missile counts as a monk weapon for the attack.

      -#magic-initiate
      .feature.block
        .head
          %span.b Magic Initiate
          .uses.long-rest
            - 1.times do |i|
              .checkbox
        %p.small
          You know two cantrips,
          %span.spell guidance
          and
          %span.spell produce flame,
          and one 1st-level spell,
          %span.spell faerie fire,
          from the druid spell list. You can cast the cantrips at-will, but once you cast
          %span.spell faerie fire
          you must complete a long rest before you can cast it again. Wisdom is your spellcasting ability for these spells.

    .flex.tall.column.narrow{style: 'margin-top:-2.2rem;'}
      -#ki
      .ki.block
        .head.b Ki
        .stat.b
          Saving Throw DC:
          .value=8 + prof + mods[:wis]
      -#font-of-magic
      .feature.block
        .points
          .scratch
            .title
              Max. Ki Points:
              %span.b=levels[:monk]
            %div
          %p.small
            You have a pool of points that fuel various ki features. You regain all ki points after a short or long rest, as long as you spend at least 30 minutes of the rest meditating.
      .feature.block
        .head.b Flurry of Blows
        .small
          %span.b Bonus Action
          &#x2726; 1 ki point
          %p
            Immediately after you take the Attack action on your turn, you can spend 1 ki point to make two unarmed strikes. If a strike hits, you may add
            %span.b one
            of the following
            %span.spell Open Hand
            technique effects:
          %ul
            %li Target knocked prone unless it makes a Dex save.
            %li You can push the target up to 15 feet away if it fails a Str save.
            %li Target can't take reactions until the end of your next turn.
      .feature.block
        .head.b Patient Defense
        .small
          %span.b Bonus Action
          &#x2726; 1 ki point
          %p.small
            You
            %span.b Dodge
            as a bonus action. Until the start of your next turn any attack roll against you has disadvantage if you can see the attacker, and you have advantage on Dex saving throws. You lose this benefit if you become incapacitated or your speed drops to 0.
      .feature.block
        .head.b Step of the Wind
        .small
          %span.b Bonus Action
          &#x2726; 1 ki point
          %p
            You
            %span.b Disengage
            or
            %span.b Dash
            as a bonus action, and your jump distance is doubled for the turn.

  .new-page

  .inventory.grid.block
    .head.b Inventory
    .item Quarterstaff
    .item &#xe8;rh&#xfa;
    .item 50 ft. hemp rope
    .item Calligrapher's supplies
    .item Backpack
    .item Bedroll
    .item Rations (10)
    .item Waterskin
    .item Traveler's clothes
    .item Mess kit
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .item
    .money
      .label.b.bg pp
      .label.b.bg gp
      .label.b.bg sp
      .label.b.bg cp
      .value.pp
      .value.gp 5
      .value.sp
      .value.cp

  .flex.role-playing
    .column.wide
      .feature.block
        .head.b Background: Far Traveler
        %p.small
          You are from a distant place, one so remote that few of those in your current location realize that it exists. Chances are that even if some people you meet have heard of your homeland, they know merely the name and perhaps a few outrageous stories. You have come to Minhelras area for your own reaons, which you might or might not choose to share.
    .column.narrow
      .feature.block
        .head.b Personality Trait
        %p.small
          I begin or end my day with small traditional rituals that are unfamiliar to those around me.
      .feature.block
        .head.b Ideal: Reserved
        %p.small
          As someone new to these strange lands, I am cautious and respectful in my dealings.
      .feature.block
        .head.b Bond
        %p.small
          I'm fascinated by the beauty and wonder of this new land.
      .feature.block
        .head.b Flaw
        %p.small
          I pretend not to understand the local language in order to avoid interactions I would rather not have.


