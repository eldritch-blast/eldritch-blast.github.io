$grey: #999;
$light-grey: #ddd;
$dark-grey: #777;
$black: #111;

@font-face {
    font-family: "Bookinsanity";
    src: url("./fonts/Bookinsanity/Bookinsanity.otf") format("opentype");
    font-weight: normal;
}

@font-face {
    font-family: "Bookinsanity Bold Italic";
    src: url("./fonts/Bookinsanity/Bookinsanity Bold Italic.otf") format("opentype");
    font-weight: bold;
    font-style: italic;
}

@font-face {
    font-family: "Bookinsanity Bold";
    src: url("./fonts/Bookinsanity/Bookinsanity Bold.otf") format("opentype");
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: "Bookinsanity Italic";
    src: url("./fonts/Bookinsanity/Bookinsanity Italic.otf") format("opentype");
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: "Nodesto Caps Condensed";
    src: url("./fonts/Nodesto Caps Condensed/Nodesto Caps Condensed Bold Italic.otf") format("opentype");
    font-weight: normal;
}

@font-face {
    font-family: "Scaly Sans";
    src: url("./fonts/Scaly Sans/Scaly Sans.otf") format("opentype");
    font-weight: normal;
}

@font-face {
    font-family: "Mr Eaves Small Caps";
    src: url("./fonts/Mr Eaves/Mr Eaves Small Caps.otf") format("opentype");
    font-weight: normal;
}

@font-face {
    font-family: "Scaly Sans Bold Italic";
    src: url("./fonts/Scaly Sans/Scaly Sans Bold Italic.otf") format("opentype");
    font-weight: bold;
    font-style: italic;
}

@font-face {
    font-family: "Scaly Sans Bold";
    src: url("./fonts/Scaly Sans/Scaly Sans Bold.otf") format("opentype");
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: "Scaly Sans Caps";
    src: url("./fonts/Scaly Sans Caps/Scaly Sans Caps.otf") format("opentype");
    font-weight: normal;
}

@font-face {
    font-family: "Solbera Imitation";
    src: url("./fonts/Solbera Imitation/Solbera Imitation.otf") format("opentype");
    font-weight: normal;
}

@media print {
    .chapter {
        margin: 1.5cm;
        column-gap: 1cm;
        columns: 2 calc(calc(8.5in - 4cm) / 2);
    }

// page directives aren't really implemented in browsers, so we need to hack pages. For now we'll assume 1 section = 1 page
    @page {
        size: 8.5in 11in;
//        margin-top: 2cm;
//        margin-bottom: 3cm;
    }

    @page :left {
//        margin-left: 2cm;
//        margin-right: 3cm;
        @bottom-left {
            content: counter(page);
        }
    }

    @page :right {
//        margin-left: 3cm;
//        margin-right: 2cm;
        @bottom-right {
            content: counter(page);
        }
    }
}

@media screen {
    .chapter {
        margin: 1.5cm;
        column-gap: 1cm;
        columns: 2 calc(calc(11.25in - 4cm) / 2);
    }
}

* {
    box-sizing: border-box;
}

body {
    font-family: 'Bookinsanity', serif;
    color: $black;

    margin: 0;

    counter-reset: chapter;
}

.chapter {
    page-break-before: always;
}

.chapter h1:before {
    counter-increment: chapter;
    content: counter(chapter) ". ";
}

h2, h3, h4, h5 {
    font-family: 'Mr Eaves Small Caps', serif;
    font-variant: small-caps;
}

h2, h3, h4, h5, h6 {
    page-break-after: avoid;
}

h2 {
    font-size: 40px;
    margin-top: 0;
    margin-bottom: 1rem;
    column-span: all;
}

h3 {
    font-size: 32px;
}

h4 {
    font-size: 24px;
    border-bottom: 2px solid $dark-grey;
    margin-top: 1rem;
    margin-bottom: 2px;
}

h5 {
    font-size: 18px;
    margin-top: 1rem;
}

p {
    line-height: 1.4;
}

table, figure {
    page-break-inside: avoid;
    font-family: 'Scaly Sans', sans-serif;
}

h2 + p {
    position: relative;
    margin: auto;
}

h2 + p::first-letter {
    font-family: 'Solbera Imitation', serif;
    color: $dark-grey;
    float: left;
    font-size: 7.125em;
    line-height: 0.8;
    padding-right: 0.3rem;
}

h2 + p::first-line {
    font-family: 'Mr Eaves Small Caps', serif;
    font-variant: small-caps;
    font-size: 20px;
}

// This would be h6 with display: run-in if it had browser support
span.subhead {
    font-family: 'Bookinsanity Bold Italic', serif;
    font-weight: bold;
    font-style: italic;
}

span.subhead:after {
    content: '.';
}

.wide {
    column-span: all;
}

.normal {
    font-weight: normal;
    font-style: normal;
    font-variant: normal;
}

.term {
    font-weight: bold;
}

.book-title {
    font-style: italic;
}
